<!DOCTYPE html><html><head><title>R: BMP, JPEG, PNG and TIFF graphics devices</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body> <div style='padding: 20pt; border: 2px solid black; text-align:center;'><b>This help topic is for R version 4.5.0. For the current version of R, try <a href='https://stat.ethz.ch/R-manual/R-patched/library/grDevices/html/png.html'>https://stat.ethz.ch/R-manual/R-patched/library/grDevices/html/png.html</a></b></div><div class="container"><main>

<table style="width: 100%;"><tr><td>png {grDevices}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2><abbr>BMP</abbr>, <abbr>JPEG</abbr>, <abbr>PNG</abbr> and <abbr>TIFF</abbr> graphics devices</h2>

<h3>Description</h3>

<p>Graphics devices for <abbr>BMP</abbr>, <abbr>JPEG</abbr>, <abbr>PNG</abbr> and <abbr>TIFF</abbr> format bitmap files.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>bmp(filename = "Rplot%03d.bmp",
    width = 480, height = 480, units = "px", pointsize = 12,
    bg = "white", res = NA, family = "", restoreConsole = TRUE,
    type = c("windows", "cairo"), antialias,
    symbolfamily="default")

jpeg(filename = "Rplot%03d.jpg",
     width = 480, height = 480, units = "px", pointsize = 12,
     quality = 75,
     bg = "white", res = NA, family = "", restoreConsole = TRUE,
     type = c("windows", "cairo"), antialias,
     symbolfamily="default")

png(filename = "Rplot%03d.png",
    width = 480, height = 480, units = "px", pointsize = 12,
    bg = "white", res = NA, family = "", restoreConsole = TRUE,
    type = c("windows", "cairo", "cairo-png"), antialias,
    symbolfamily="default")

tiff(filename = "Rplot%03d.tif",
     width = 480, height = 480, units = "px", pointsize = 12,
     compression = c("none", "rle", "lzw", "jpeg", "zip",
                     "lzw+p", "zip+p",
                     "lerc", "lzma",  "zstd", "webp"),
     bg = "white", res = NA, family = "", restoreConsole = TRUE,
     type = c("windows", "cairo"), antialias,
     symbolfamily="default")
</code></pre>


<h3>Arguments</h3>

<table role = "presentation">
<tr><td><code id="filename">filename</code></td>
<td>
<p>the path of the output file, up to 511 characters.  The
page number is substituted if a C integer format is included in the
character string, as in the default, and tilde-expansion is
performed (see <code>path.expand</code>).   (The result must be less than
600 characters long.  See <code>png</code> for further
details.)
</p>
</td></tr>
<tr><td><code id="width">width</code></td>
<td>
<p>the width of the device.</p>
</td></tr>
<tr><td><code id="height">height</code></td>
<td>
<p>the height of the device.</p>
</td></tr>
<tr><td><code id="units">units</code></td>
<td>
<p>The units in which <code>height</code> and <code>width</code> are
given.  Can be <code>px</code> (pixels, the default), <code>in</code> (inches),
<code>cm</code> or <code>mm</code>.</p>
</td></tr>
<tr><td><code id="pointsize">pointsize</code></td>
<td>
<p>the default pointsize of plotted text, interpreted as
big points (1/72 inch) at <code>res</code> <abbr>ppi</abbr>.</p>
</td></tr>
<tr><td><code id="bg">bg</code></td>
<td>
<p>the initial background colour: can be overridden by setting
<code>par("bg")</code>.</p>
</td></tr>
<tr><td><code id="quality">quality</code></td>
<td>
<p>the &lsquo;quality&rsquo; of the <abbr>JPEG</abbr> image, as a
percentage.  Smaller values will give more compression but also more
degradation of the image.</p>
</td></tr>
<tr><td><code id="compression">compression</code></td>
<td>
<p>the type of compression to be used.  Can also be a
numeric value supported by the underlying <code>libtiff</code> library :
see its &lsquo;<span class="file">tiff.h</span>&rsquo; header file.</p>
</td></tr>
<tr><td><code id="res">res</code></td>
<td>
<p>The nominal resolution in <abbr>ppi</abbr> which will be recorded in the
bitmap file, if a positive integer.  Also used for units other than
the default.  If not specified, taken as 72 <abbr>ppi</abbr> to set the size of
text and line widths.</p>
</td></tr>
<tr><td><code id="family">family</code></td>
<td>
<p>A length-one character vector specifying the default
font family.  The default means to use the font numbers on the
Windows <abbr>GDI</abbr> versions and <code>"sans"</code> on the cairographics
versions.</p>
</td></tr>
<tr><td><code id="restoreConsole">restoreConsole</code></td>
<td>
<p>See the &lsquo;Details&rsquo; section of
<code>windows</code>.  For <code>type == "windows"</code> only.</p>
</td></tr>
<tr><td><code id="type">type</code></td>
<td>
<p>Should be plotting be done using Windows <abbr>GDI</abbr> or cairographics?</p>
</td></tr>
<tr><td><code id="antialias">antialias</code></td>
<td>
<p>Length-one character vector.
</p>
<p>For allowed values and their effect on fonts with <code>type =
      "windows"</code> see <code>windows</code>: for that type if the
argument is missing the default is taken from
<code>windows.options()$bitmap.aa.win</code>.
</p>
<p>For allowed values and their effect (on fonts and lines, but not
fills) with <code>type = "cairo"</code> see <code>svg</code>.</p>
</td></tr>
<tr><td><code id="symbolfamily">symbolfamily</code></td>
<td>
<p>  For cairographics only:
a length-one character string that specifies the font family to
be used as the &quot;symbol&quot; font (e.g., for plotmath output).
The default value is &quot;default&quot;, which means that R will choose
a default &quot;symbol&quot; font based on the graphics device capabilities.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>Plots in <abbr>PNG</abbr> and <abbr>JPEG</abbr> format can easily be converted to many other
bitmap formats, and both can be displayed in modern web browsers.  The
<abbr>PNG</abbr> format is lossless and is best for line diagrams and blocks of
colour.  The <abbr>JPEG</abbr> format is lossy, but may be useful for image plots,
for example.  The <abbr>BMP</abbr> format is standard on Windows, and supported by
most viewers elsewhere.  <abbr>TIFF</abbr> is a meta-format: the default format
written by <code>tiff</code> is lossless and stores RGB (and alpha where
appropriate) values uncompressed&mdash;such files are widely accepted,
which is their main virtue over <abbr>PNG</abbr>.
</p>
<p>Windows <abbr>GDI</abbr> imposes limits on the size of bitmaps: these are not
documented in the <abbr>SDK</abbr> and may depend on the version of Windows.
It seems that <code>width</code> and <code>height</code> are each limited to
<code class="reqn">2^{15}-1</code>.  In addition, there are limits on the total
number of pixels which depend on the graphics hardware.
</p>
<p>By default no resolution is recorded in the file (except for <abbr>BMP</abbr>).
Viewers will often assume a nominal resolution of 72 <abbr>ppi</abbr> when none is
recorded.  As resolutions in <abbr>PNG</abbr> files are recorded in pixels/metre,
the reported <abbr>ppi</abbr> value will be changed slightly.
</p>
<p>For graphics parameters that make use of dimensions in inches,
<code>res</code> <abbr>ppi</abbr> (default 72) is assumed.
</p>
<p>Both <code>bmp</code> and <code>png</code> will use a palette if there are fewer
than 256 colours on the page, and record a 24-bit RGB file otherwise.
For the <code>png</code> device, <code>type = "cairo"</code> does the <abbr>PNG</abbr> output in
the driver and so is compatible with the <code>"windows"</code> type.
<code>type = "cairo-png"</code> uses cairographics' <abbr>PNG</abbr> backend which will
never use a palette and normally creates a larger 32-bit ARGB
file&mdash;this may work better for specialist uses with semi-transparent
colours.
</p>
<p>The <abbr>JPEG</abbr> format only supports opaque backgrounds.
</p>
<p><code>png(type = "windows")</code> supports transparent backgrounds on 16-bit
(&lsquo;High Color&rsquo;) or better screens: use <code>bg =
    "transparent"</code>.  There is also support for semi-transparent colours
of lines, fills and text.  However, as there is only partial support
for transparency in the graphics toolkit used: if there is a
transparent background semi-transparent colours are painted onto a
slightly off-white background and hence the pixels are opaque.
</p>
<p>Not all <abbr>PNG</abbr> viewers render files with transparency correctly.
</p>
<p><code>tiff</code> compression types <code>"lzw+p"</code> and <code>"zip+p"</code> use
horizontal differencing (&lsquo;differencing predictor&rsquo;, section 14
of the <abbr>TIFF</abbr> specification) in combination with the compression method,
which is effective for continuous-tone images, especially colour ones.
The <code>jpeg</code> quality when used for <code>tiff</code> compression is fixed
at 75.
</p>
<p>Unknown resolutions in <abbr>BMP</abbr> files are recorded as 72 <abbr>ppi</abbr>.
</p>


<h3>Value</h3>

<p>A plot device is opened: nothing is returned to the <span class="rlang"><b>R</b></span> interpreter.
</p>


<h3>Warnings</h3>

<p>Note that by default the <code>width</code> and <code>height</code> values are in
pixels not inches.  A warning will be issued if both are less than 20.
</p>
<p>If you plot more than one page on one of these devices and do not
include something like <code>%d</code> for the sequence number in
<code>file</code>, the file will contain the last page plotted.
</p>


<h3>Differences between OSes</h3>

<p>These functions are interfaces to three or more different underlying
devices.
</p>

<ul>
<li><p> On Windows, devices based on plotting to a hidden screen using
Windows' <abbr>GDI</abbr> calls.
</p>
</li>
<li><p> On platforms with support for X11, plotting to a hidden X11
display.
</p>
</li>
<li><p> On macOS when working at the console and when <span class="rlang"><b>R</b></span> is
compiled with suitable support, using Apple's Quartz plotting
system.
</p>
</li>
<li><p> Where support has been compiled in for cairographics, plotting
on cairo surfaces.  This may use the native platform support for
fonts, or it may use <code>fontconfig</code> to support a wide range of
font formats.
</p>
</li></ul>

<p>Inevitably there will be differences between the options supported and
output produced.  Perhaps the most important are support for
antialiased fonts and semi-transparent colours: the best results are
likely to be obtained with the cairo- or Quartz-based devices where
available.
</p>
<p>The default extensions are &lsquo;<span class="file">.jpg</span>&rsquo; and &lsquo;<span class="file">.tif</span>&rsquo; on Windows, and
&lsquo;<span class="file">.jpeg</span>&rsquo; and &lsquo;<span class="file">.tiff</span>&rsquo; elsewhere.
</p>


<h3>Conventions</h3>

<p>This section describes the implementation of the conventions for
graphics devices set out in the &lsquo;R Internals&rsquo; manual.
</p>

<ul>
<li><p> The default device size is in pixels.
</p>
</li>
<li><p> Font sizes are in big points interpreted at <code>res</code> <abbr>ppi</abbr>.
</p>
</li>
<li><p> The default font family is Arial.
</p>
</li>
<li><p> Line widths are a multiple of 1/96 inch (interpreted at
<code>res</code> <abbr>ppi</abbr>), with a minimum of one pixel (<code>type =
      "windows"</code>) or 0.01 (<code>type = "cairo"</code>).
</p>
</li>
<li><p> The minimum radius of a circle is 1 pixel for <code>type =
      "windows"</code>.
</p>
</li>
<li><p> Colours are interpreted by the viewing application.
</p>
</li></ul>



<h3>Note</h3>

<p>The <code>type = "windows"</code> versions of these devices effectively
plot on a hidden screen and then copy the image to the required
format.  This means that they have the same colour handling as the
actual screen device, and work best if that is set to a 24-bit or
32-bit colour mode.
</p>
<p>For high-quality plots you will probably want <code>antialias =
    "cleartype"</code> if this is not the default on your Windows system.  On
the other hand, <code>png(antialias = "none")</code> will give the most
compact files
</p>
<p>Support for compression types depends on the underlying &lsquo;<span class="samp">&#8288;libtiff&#8288;</span>&rsquo;
library: types <code>"lerc"</code>, <code>"lzma"</code>, <code>"zstd"</code> and
<code>"webp"</code> are relatively recent additions and may well not be
supported.  They are also liable to be unsupported in <abbr>TIFF</abbr> viewers.
</p>


<h3>References</h3>

<p>The <abbr>PNG</abbr> specification, <a href="https://www.w3.org/TR/png/">https://www.w3.org/TR/png/</a>.
</p>
<p>The <abbr>TIFF</abbr> specification,
<a href="https://www.iso.org/standard/34342.html">https://www.iso.org/standard/34342.html</a>.
See also <a href="https://en.wikipedia.org/wiki/TIFF">https://en.wikipedia.org/wiki/TIFF</a>.


</p>


<h3>See Also</h3>

<p><code>Devices</code>, <code>dev.print</code>
</p>
<p><code>capabilities</code> to see if these devices are
supported by this build of <span class="rlang"><b>R</b></span>, and if <code>type = "cairo"</code> is supported.
</p>
<p><code>bitmap</code> provides an alternative way to generate plots in many
bitmap formats that does not depend on accessing the X11 display but does
depend on having GhostScript installed.
</p>
<p>Ways to write raster images to bitmap formats are available in
packages <a href="https://CRAN.R-project.org/package=jpeg"><span class="pkg">jpeg</span></a>, <a href="https://CRAN.R-project.org/package=png"><span class="pkg">png</span></a> and <a href="https://CRAN.R-project.org/package=tiff"><span class="pkg">tiff</span></a>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## copy current plot to a (large) PNG file
## Not run: dev.print(png, filename = "myplot.png", width = 1024, height = 768)

png("myplot.png", bg = "transparent")
plot(1:10)
rect(1, 5, 3, 7, col = "white")
dev.off()

jpeg("myplot.jpeg")
example(rect)
dev.off()
</code></pre>

<hr /><div style="text-align: center;">[<a href='/r-help/4.5.0/00index.html'>Package <em>grDevices</em> version 4.5.0</a> ]</div></main>

</div>
</body></html>
