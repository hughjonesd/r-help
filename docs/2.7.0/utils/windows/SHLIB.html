<!DOCTYPE html><html><head><title>R: Build a DLL for Dynamic Loading</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body> <div style='padding: 20pt; border: 2px solid black; text-align:center;'><b>This help topic is for R version 2.7.0. For the corresponding topic in the current version of R, see <a href='https://stat.ethz.ch/R-manual/R-patched/library/utils/html/SHLIB.html'>https://stat.ethz.ch/R-manual/R-patched/library/utils/html/SHLIB.html</a></b></div><div class="container">

<table style="width: 100%;"><tr><td>SHLIB {utils}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2 id='SHLIB'>Build a DLL for Dynamic Loading</h2>

<h3>Description</h3>

<p>The given source files are first compiled.  All specified object files
are then linked into a shared library which can be loaded into <span class="rlang"><b>R</b></span>
using <code>dyn.load</code> or <code>library.dynam</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>R CMD SHLIB [options] [-o dllname] files
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="SHLIB_:_files">files</code></td>
<td>
<p>a list of names of (typically) source files to be
compiled and included in the library.  You can also include the names
of object files which are automagically made from their sources,
and archive (<code>*.a</code>) and library linking commands.
</p>
</td></tr>
<tr><td><code id="SHLIB_:_dllname">dllname</code></td>
<td>
<p>the name of the shared library to be built, optionally
including the extension &lsquo;<span class="file">.dll</span>&rsquo;.  If not given, the name of the
DLL is taken from the first source or object file specified.</p>
</td></tr>
<tr><td><code id="SHLIB_:_options">options</code></td>
<td>
<p>Further options to control the processing.  Use
<code>R CMD SHLIB --help</code> for a current list.  The most useful one
is <code>-d</code> to build a debug DLL.</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>R CMD SHLIB</code> uses the mechanism as used by <code>INSTALL</code>
to compile source code in packages.  To use <code>SHLIB</code> you need to
have installed (from the <span class="rlang"><b>R</b></span> installer) the files for compiling source
packages as well as the tools described in the &lsquo;R Installation and 
Administration&rsquo; manual.
</p>
<p>Please consult section &lsquo;Creating shared objects&rsquo; in the manual
&lsquo;Writing R Extensions&rsquo; for how to customize it (for example to
add <code>cpp</code> flags and to add libraries to the link step) and for
details of some of its quirks.
</p>
<p>Items in <code>files</code> with extensions &lsquo;<span class="file">.c</span>&rsquo;, &lsquo;<span class="file">.cpp</span>&rsquo;,
&lsquo;<span class="file">.cc</span>&rsquo;, &lsquo;<span class="file">.C</span>&rsquo;, &lsquo;<span class="file">.f</span>&rsquo;, &lsquo;<span class="file">.f90</span>&rsquo;, &lsquo;<span class="file">.f95</span>&rsquo; and &lsquo;<span class="file">.m</span>&rsquo;,
are regarded as source files, and those with extension &lsquo;<span class="file">.o</span>&rsquo; as
object files.  All other items are passed to the linker.
</p>
<p>If there is an exports file &lsquo;<span class="file">dllname-win.def</span>&rsquo; in the current
directory it will be used, otherwise all entry points in objects (but
not libraries) will be exported from the DLL.
</p>


<h3>See Also</h3>

<p><code>dyn.load</code>, <code>library.dynam</code>.
</p>
<p>The &lsquo;R Installation and Administration&rsquo; and &lsquo;Writing R 
Extensions&rsquo; manuals.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## Not run: 
rcmd SHLIB -o my.dll a.f b.f -L/AMD/acml3.5.0/gnu32/lib -lacml

## End(Not run)</code></pre>

<hr /><div style="text-align: center;">[Package <em>utils</em> version 2.7.0 ]</div>
</div>
</body></html>
