<!DOCTYPE html><html><head><title>R: Model Formulae</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body> <div style='padding: 20pt; border: 2px solid black; text-align:center;'><b>This help topic is for R version 0.63.2. For the corresponding topic in the current version of R, see <a href='https://stat.ethz.ch/R-manual/R-patched/library/base/html/formula.html'>https://stat.ethz.ch/R-manual/R-patched/library/base/html/formula.html</a></b></div><div class="container">

<table style="width: 100%;"><tr><td>formula {base}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2 id='formula'>Model Formulae</h2>

<h3>Description</h3>

<p>The generic function <code>formula</code> and its specific methods provide a
way of extracting formulae which have been included in other objects.
</p>
<p><code>as.formula</code> is almost identical, additionally preserving
attributes when <code>object</code> already inherits from <code>"formula"</code>.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>y ~ model
formula(object)
formula.default(anything)
formula.formula(formula.obj)
formula.terms(terms.obj)
formula.data.frame(df)
as.formula(object)
</code></pre>


<h3>Details</h3>

<p>The models fit by, e.g., the <code>lm</code> and <code>glm</code> functions
are specified in a compact symbolic form.
The <code>~</code> operator is basic in the formation of such models.
An expression of the form <code>y~model</code> is interpreted
as a specification that the response <code>y</code> is modelled
by a linear predictor specified symbolically by <code>model</code>.
Such a model consists of a series of terms separated
by <code>+</code> operators.
The terms themselves consist of variable and factor
names separated by <code>:</code> operators.
Such a term is interpreted as the interaction of
all the variables and factors appearing in the term.
</p>
<p>In addition to <code>+</code> and <code>:</code>, a number of other
operators are useful in model formulae.
The <code>*</code> operator denotes factor crossing:
<code>a*b</code> interpreted as <code>a+b+a:b</code>.
The <code>^</code> operator indicates crossing to the
specified degree.  For example <code>(a+b+c)^2</code>
is identical to <code>(a+b+c)*(a+b+c)</code> which in turn
expands to a formula containing the main effects
for <code>a</code>, <code>b</code> and <code>c</code> together
with their second-order interactions.
The <code>%in%</code> operator indicates that the terms
on its left are nested within those on the right.
For example <code>a+b%in%a</code> expands to the
formula <code>a+a:b</code>.
</p>
<p>While formulae usually involve just variable and factor
names, they can also involve arithmetic expressions.
The formula <code>log(y)~a+log(x)</code> is quite legal.
When such arithmetic expressions involve
operators which are also used symbolically
in model formulae, there can be confusion between
arithmetic and symbolic operator use.
To avoid this confusion, the function <code>I()</code>
can be used to bracket those portions of a model
formula where the operators are used in their
arithmetic sense.  For example, in the formula
<code>y~a+I(b+c)</code>, the term <code>b+c</code> is to be
interpreted as the sum of <code>b</code> and <code>c</code>.
</p>


<h3>Value</h3>

<p>All the functions above produce an object
of class <code>formula</code> which contains a symbolic model formula.
</p>


<h3>See Also</h3>

<p><code>lm</code>, <code>glm</code>, <code>terms</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>class(fo &lt;- y ~ x1*x2) # "formula"
fo
typeof(fo)# R internal : "language"
terms(fo)
</code></pre>

<hr /><div style="text-align: center;">[<a href='/r-help/0.63.2/00index.html'>Package <em>base</em> version 0.63.2</a> ]</div>
</div>
</body></html>
