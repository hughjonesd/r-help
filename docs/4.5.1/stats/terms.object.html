<!DOCTYPE html><html><head><title>R: Description of Terms Objects</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body> <div style='padding: 20pt; border: 2px solid black; text-align:center;'><b>This help topic is for R version 4.5.1. For the current version of R, try <a href='https://stat.ethz.ch/R-manual/R-patched/library/stats/html/terms.object.html'>https://stat.ethz.ch/R-manual/R-patched/library/stats/html/terms.object.html</a></b></div><div class="container"><main>

<table style="width: 100%;"><tr><td>terms.object {stats}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Description of Terms Objects</h2>

<h3>Description</h3>

<p>An object of class <code>terms</code> holds information about a
model.  Usually the model was specified in terms of a
<code>formula</code> and that formula was used to determine the terms
object.
</p>


<h3>Details</h3>

<p>The object itself is simply the result of <code>terms.formula(&lt;formula&gt;)</code>.
It has a number of attributes
and they are used to construct the model frame:
</p>

<dl>
<dt><code>factors</code></dt><dd><p>An integer matrix of variables by terms showing which variables
appear in which terms.  The entries are </p>

<dl>
<dt>0 </dt><dd><p>if the variable does not occur in the term,</p>
</dd>
<dt>1 </dt><dd><p>if it does occur and should be coded by contrasts, and</p>
</dd>
<dt>2 </dt><dd><p>if it occurs and should be coded via dummy variables for
all levels (as when a lower-order term is missing).</p>
</dd> </dl>

<p>Note that variables in main effects always receive 1,
even if the intercept is missing (in which case the first one
should be coded with dummy variables).
If there are no terms other than an intercept and offsets,
this is <code>integer(0)</code>.
</p>
</dd>
<dt><code>term.labels</code></dt><dd><p>A character vector containing the labels for each
of the terms in the model, except for offsets.  Note that these are
after possible re-ordering of terms.
</p>
<p>Non-syntactic names will be quoted by backticks: this makes it
easier to re-construct the formula from the term labels.
</p>
</dd>
<dt><code>variables</code></dt><dd><p>A call to <code>list</code> of the variables in the model.</p>
</dd>
<dt><code>intercept</code></dt><dd><p>Either 0, indicating no intercept is to be fit, or 1
indicating that an intercept is to be fit.</p>
</dd>
<dt><code>order</code></dt><dd><p>A vector of the same length as <code>term.labels</code>
indicating the order of interaction for each term.</p>
</dd>
<dt><code>response</code></dt><dd><p>The index of the variable (in <code>variables</code>) of the
response (the left hand side of the formula).  Zero, if there is no
response.</p>
</dd>
<dt><code>offset</code></dt><dd><p>If the model contains <code>offset</code> terms there
is an <code>offset</code> attribute indicating which <code>variables</code> are offsets.</p>
</dd>
<dt><code>specials</code></dt><dd><p>If a <code>specials</code> argument was given to
<code>terms.formula</code> there is a <code>specials</code> attribute, a
pairlist of vectors (one for each specified special function) giving
numeric indices of the arguments of the list returned as the
<code>variables</code> attribute which contain these special functions.</p>
</dd>
<dt><code>dataClasses</code></dt><dd><p>optional.  A named character vector giving the classes
(as given by <code>.MFclass</code>) of the variables used in a fit.</p>
</dd>
<dt><code>predvars</code></dt><dd><p>optional.  An expression to help in computing
predictions at new covariate values; see <code>makepredictcall</code>.</p>
</dd>
</dl>

<p>The object has class <code>c("terms", "formula")</code>.
</p>


<h3>Note</h3>

<p>These objects are different from those found in S.  In particular
there is no <code>formula</code> attribute: instead the object is itself a
formula.  (Thus, the mode of a terms object is different.)
</p>
<p>Examples of the <code>specials</code> argument can be seen in the
<code>aov</code> and <code>coxph</code> functions, the
latter from package <a href="https://CRAN.R-project.org/package=survival"><span class="pkg">survival</span></a>.
</p>


<h3>See Also</h3>

<p><code>terms</code>, <code>formula</code>.
</p>


<h3>Examples</h3>

<pre><code class='language-R'>## use of specials (as used for gam() in packages mgcv and gam)
(tf &lt;- terms(y ~ x + x:z + s(x), specials = "s"))
## Note that the "factors" attribute has variables as row names
## and term labels as column names, both as character vectors.
attr(tf, "specials")    # index 's' variable(s)
rownames(attr(tf, "factors"))[attr(tf, "specials")$s]

## we can keep the order by
terms(y ~ x + x:z + s(x), specials = "s", keep.order = TRUE)
</code></pre>

<hr /><div style="text-align: center;">[<a href='/r-help/4.5.1/00index.html'>Package <em>stats</em> version 4.5.1</a> ]</div></main>

</div>
</body></html>
