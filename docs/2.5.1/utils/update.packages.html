<!DOCTYPE html><html><head><title>R: Download Packages from CRAN-like repositories</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css">
<script type="text/javascript">
const macros = { "\\R": "\\textsf{R}", "\\code": "\\texttt"};
function processMathHTML() {
    var l = document.getElementsByClassName('reqn');
    for (let e of l) { katex.render(e.textContent, e, { throwOnError: false, macros }); }
    return;
}</script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js"
    onload="processMathHTML();"></script>
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body> <div style='padding: 20pt; border: 2px solid black; text-align:center;'><b>This help topic is for R version 2.5.1. For the corresponding topic in the current version of R, see <a href='https://stat.ethz.ch/R-manual/R-patched/library/utils/html/update.packages.html'>https://stat.ethz.ch/R-manual/R-patched/library/utils/html/update.packages.html</a></b></div><div class="container">

<table style="width: 100%;"><tr><td>update.packages {utils}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2 id='update.packages'>Download Packages from CRAN-like repositories</h2>

<h3>Description</h3>

<p>These functions can be used to automatically compare the version
numbers of installed packages with the newest available version on
the repositories and update outdated packages on the fly.
</p>


<h3>Usage</h3>

<pre><code class='language-R'>update.packages(lib.loc = NULL, repos = getOption("repos"),
                contriburl = contrib.url(repos, type),
                method, instlib = NULL, ask = TRUE, available = NULL,
                ..., checkBuilt = FALSE,
                type = getOption("pkgType"))

available.packages(contriburl = contrib.url(getOption("repos")),
                   method, fields = NULL)

old.packages(lib.loc = NULL, repos = getOption("repos"),
             contriburl = contrib.url(repos),
             method, available = NULL, checkBuilt = FALSE)

new.packages(lib.loc = NULL, repos = getOption("repos"),
             contriburl = contrib.url(repos, type),
             method, available = NULL, ask = FALSE, ...,
             type = getOption("pkgType"))

download.packages(pkgs, destdir, available = NULL,
                  repos = getOption("repos"),
                  contriburl = contrib.url(repos, type),
                  method, type = getOption("pkgType"))

install.packages(pkgs, lib, repos = getOption("repos"),
                 contriburl = contrib.url(repos, type),
                 method, available = NULL, destdir = NULL,
		 installWithVers = FALSE, dependencies = NA,
                 type = getOption("pkgType"),
                 configure.args = character(0),
                 clean = FALSE)

contrib.url(repos, type = getOption("pkgType"))
</code></pre>


<h3>Arguments</h3>

<table>
<tr><td><code id="update.packages_:_lib.loc">lib.loc</code></td>
<td>
<p>character vector describing the location of R
library trees to search through (and update packages therein).</p>
</td></tr>
<tr><td><code id="update.packages_:_repos">repos</code></td>
<td>
<p>character vector, the base URL(s) of the repositories
to use, i.e., the URL of the CRAN master such as
<code>"http://cran.r-project.org"</code> or its Statlib mirror,
<code>"http://lib.stat.cmu.edu/R/CRAN"</code>.
Can be <code>NULL</code> to install from local &lsquo;<span class="file">.tar.gz</span>&rsquo; files.
</p>
</td></tr>
<tr><td><code id="update.packages_:_contriburl">contriburl</code></td>
<td>
<p>URL(s) of the contrib sections of the
repositories.  Use this argument only if your repository mirror is
incomplete, e.g., because you burned only the &lsquo;<span class="file">contrib</span>&rsquo; section on a
CD.  Overrides argument <code>repos</code>.
Can also be <code>NULL</code> to install from local &lsquo;<span class="file">.tar.gz</span>&rsquo; files.
</p>
</td></tr>
<tr><td><code id="update.packages_:_method">method</code></td>
<td>
<p>Download method, see <code>download.file</code>.</p>
</td></tr>
<tr><td><code id="update.packages_:_pkgs">pkgs</code></td>
<td>
<p>character vector of the short names of packages/bundles whose
current versions should be downloaded from the repositories.
If <code>repos = NULL</code>, a character vector of file paths of
&lsquo;<span class="file">.tar.gz</span>&rsquo; files.  These can be source archives or binary
package/bundle archive files (as created by <code>R CMD build --binary</code>).
Tilde-expansion will be done on the file paths.
If this is a zero-length character vector, a listbox of available
packages (including those contained in bundles) is presented where
possible.
</p>
</td></tr>
<tr><td><code id="update.packages_:_destdir">destdir</code></td>
<td>
<p>directory where downloaded packages are stored.</p>
</td></tr>
<tr><td><code id="update.packages_:_available">available</code></td>
<td>
<p>an object listing packages available at the repositories
as returned by <code>available.packages</code>.</p>
</td></tr>
<tr><td><code id="update.packages_:_lib">lib</code></td>
<td>
<p>character vector giving the library directories where to
install the packages.  Recycled as needed.  If missing, defaults to
<code>.libPaths()[1]</code>.</p>
</td></tr>
<tr><td><code id="update.packages_:_ask">ask</code></td>
<td>
<p>logical indicating whether to ask user before packages
are actually downloaded and installed, or the character string
<code>"graphics"</code>, which brings up a widget to allow the user to
(de-)select from the list of packages which could be updated.  The
latter only works on systems with a GUI version of
<code>select.list</code>, and is otherwise equivalent to <code>ask
      = TRUE</code>.
</p>
</td></tr>
<tr><td><code id="update.packages_:_installWithVers">installWithVers</code></td>
<td>
<p>If <code>TRUE</code>, will invoke the install of the
package such that it can be referenced by package version.</p>
</td></tr>
<tr><td><code id="update.packages_:_checkBuilt">checkBuilt</code></td>
<td>
<p>If <code>TRUE</code>, a package built under an earlier
minor version of <span class="rlang"><b>R</b></span> is considered to be &lsquo;old&rsquo;.</p>
</td></tr>
<tr><td><code id="update.packages_:_instlib">instlib</code></td>
<td>
<p>character string giving the library directory where to
install the packages.</p>
</td></tr>
<tr><td><code id="update.packages_:_dependencies">dependencies</code></td>
<td>
<p>logical indicating to also install uninstalled
packages on which these packages depend/suggest/import
(and so on recursively).  Not used if <code>repos = NULL</code>.
Can also be a character vector, a subset of
<code>c("Depends", "Imports", "Suggests")</code>.
</p>
<p>Only supported if <code>lib</code> is of length one (or missing),
so it is unambiguous where to install the dependent packages.
</p>
<p>The default, <code>NA</code>, means <code>c("Depends", "Imports")</code> if
<code>lib</code> is unambiguous, and <code>FALSE</code> otherwise.
</p>
</td></tr>
<tr><td><code id="update.packages_:_configure.args">configure.args</code></td>
<td>
<p>a character vector or a named list.
If a character vector with no names is supplied, the elements are
concatenated into a single string (separated by a space) and used
as the value for the <code>--configure-args</code>
flag in the call to <code>R CMD INSTALL</code>.
If the character vector has names, these are assumed to identify
values for <code>--configure-args</code> for individual packages.
This allows one to specify settings for an entire collection of packages
which will be used if any of those packages are installed.
These settings can therefore be reused and act as default settings.
A named list can be used also to the same effect, and that
allows multi-element character strings for each package
which are concatenated to a single string to be used as the
value for <code>--configure-args</code>.
</p>
</td></tr>
<tr><td><code id="update.packages_:_...">...</code></td>
<td>

<p>(for <code>update.packages</code>).  Arguments such as <code>destdir</code>,
<code>installWithVers</code> and <code>dependencies</code> to be passed to
<code>install.packages</code>.
</p>
<p>(for <code>new.packages</code>).  Arguments such as <code>destdir</code>
and <code>dependencies</code> to be passed to <code>install.packages</code>.</p>
</td></tr>
<tr><td><code id="update.packages_:_type">type</code></td>
<td>
<p>character, indicating the type of package to download and
install.
Possible values are <code>"source"</code> (the default except under the
CRAN Mac OS X build), <code>"mac.binary"</code> and <code>"win.binary"</code>
(which can be downloaded but not installed).
</p>
</td></tr>
<tr><td><code id="update.packages_:_clean">clean</code></td>
<td>
<p>a logical value indicating whether to specify
to add the <code>--clean</code> flag to the call to <code>R CMD INSTALL</code>.
This is sometimes used to perform additional operations at the end
of the package installation in addition to removing intermediate files.
</p>
</td></tr>
<tr><td><code id="update.packages_:_fields">fields</code></td>
<td>
<p>a character vector giving the fields to extract from
the <code>PACKAGES</code> file(s) in addition to the default ones, or
<code>NULL</code> (default).  Unavailable fields result in <code>NA</code>
values.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p>All of these functions work with the names of a package or bundle (and
not the component packages of a bundle, except for
<code>install.packages</code> if the repository provides the necessary
information).
</p>
<p><code>available.packages</code> returns a matrix of details corresponding to
packages/bundles currently available at  one or more repositories. The
current list of packages is downloaded over the internet (or copied
from a local mirror).  It returns only packages whose version
requirements are met by the running version of <span class="rlang"><b>R</b></span>.
</p>
<p><code>old.packages</code> compares the information from
<code>available.packages</code> with that from
<code>installed.packages</code> and reports installed
packages/bundles that have newer versions on the repositories or, if
<code>checkBuilt = TRUE</code>, that were built under an earlier minor
version of <span class="rlang"><b>R</b></span> (for example built under 2.0.x when running <span class="rlang"><b>R</b></span> 2.1.1).
</p>
<p><code>new.packages</code> does the same comparison but reports uninstalled
packages/bundles that are available at the repositories.  It will also
give warnings about incompletely installed bundles (provided the
information is available) and bundles whose contents has changed.
If <code>ask != FALSE</code> it asks which packages should be installed
in the first element of <code>lib.loc</code>.  NB: versioned installs are
not installs of a named package.
</p>
<p><code>download.packages</code> takes a list of package/bundle names and a
destination directory, downloads the newest versions and saves them in
<code>destdir</code>.  If the list of available packages is not given as
argument, it is obtained from repositories.  If a repository is local,
i.e., the URL starts with <code>"file:"</code>, then the packages are not
downloaded but used directly.  (Both <code>"file:"</code> and
<code>"file:///"</code> are allowed as prefixes to a file path, the latter
for an absolute file path.)
</p>
<p>The main function of the set is <code>update.packages</code>.  First a list
of all packages/bundles found in <code>lib.loc</code> is created and
compared with those available at the repositories.  If <code>ask =
    TRUE</code> (the default) packages/bundles with a newer version are
reported and for each one the user can specify if it should be
updated.
If so, the package sources are downloaded from the repositories and
installed in the respective library path (or <code>instlib</code>
if specified) using the <span class="rlang"><b>R</b></span> <code>INSTALL</code> mechanism.
</p>
<p><code>install.packages</code> can be used to install new
packages/bundles. It takes a vector of names and a destination
library, downloads the packages from the repositories and installs
them.  (If the library is omitted it defaults to the first directory
in <code>.libPaths()</code>, with a warning if there is more than one.)  If
<code>lib</code> is omitted or is of length one and is not a (group)
writeable directory, the code offers to create a personal library tree
(the first element of <code>Sys.getenv("R_LIBS_USER")</code> and install
there.
</p>


<p>An attempt is made to install the packages in an order that respects
their dependencies.  This does assume that all the entries in
<code>lib</code> are on the default library path for installs (set by
<code>R_LIBS</code>). 
</p>
<p><code>contrib.url</code> adds the appropriate type-specific path within a
repository to each URL in <code>repos</code>.
</p>
<p>For <code>install.packages</code>, <code>destdir</code>
is the directory to which packages will be downloaded.  If it is
<code>NULL</code> (the default) a directory <code>downloaded_packages</code> of
the session temporary directory will be used (and the files will be
deleted at the end of the session).
</p>
<p>If <code>repos</code> or <code>contriburl</code> is a vector of length greater than
one, the newest version of the package compatible with this version of <span class="rlang"><b>R</b></span>
is fetched from the first repository on the list within which it is found.
</p>


<h3>Value</h3>

<p>For <code>available.packages</code>, a matrix
with one row per package/bundle, row names the package names and
column names <code>"Package"</code>, <code>"Version"</code>, <code>"Priority"</code>,
<code>"Bundle"</code>, <code>"Depends"</code>, <code>"Imports"</code>, <code>"Suggests"</code>
<code>"Contains"</code> and <code>"Repository"</code>.  Additional columns can
be specified using the <code>fields</code> argument.
</p>
<p>For <code>old.packages</code>, <code>NULL</code> or a matrix with one row per
package/bundle, row names the package names and column names
<code>"Package"</code>, <code>"LibPath"</code>, <code>"Installed"</code> (the version),
<code>"Built"</code> (the version built under), <code>"ReposVer"</code> and
<code>"Repository"</code>.
</p>
<p>For <code>new.packages</code> a character vector of package/bundle names,
<em>after</em> any have been installed.
</p>
<p>For <code>download.packages</code>, a two-column matrix of names and
destination file names, for those packages/bundles successfully
downloaded.  If packages are not available or there is a problem with
the download, suitable warnings are given.
</p>
<p><code>install.packages</code> and <code>update.packages</code> have no return value.
</p>


<h3>Warning</h3>

<p>Take care when using <code>dependencies</code> with <code>update.packages</code>,
for it is unclear where new dependencies should be installed.  The
current implementation will only allow it if all the packages to be
updated are in a single library, when that library will be used.
</p>


<h3>Note</h3>

<p>Some binary distributions of <span class="rlang"><b>R</b></span> have <code>INSTALL</code> in a separate
bundle, e.g. an <code>R-devel</code> RPM.  <code>install.packages</code> will
give an error if called on such a system.
</p>


<h3>See Also</h3>

<p><code>installed.packages</code>, <code>remove.packages</code>
</p>
<p>See <code>download.file</code> for how to handle proxies and
other options to monitor file transfers.
</p>
<p><code>INSTALL</code>, <code>REMOVE</code>,
<code>library</code>, <code>.packages</code>, <code>read.dcf</code>
</p>


<h3>Examples</h3>

<pre><code class='language-R'>
## Not run: 
  install.packages(c("XML_0.99-5.tar.gz",
                     "../../Interfaces/Perl/RSPerl_0.8-0.tar.gz"),
                   repos = NULL,
                   configure.args = c(XML = '--with-xml-config=xml-config',
                                      RSPerl = "--with-modules='IO Fcntl'"))

## End(Not run)
</code></pre>

<hr /><div style="text-align: center;">[Package <em>utils</em> version 2.5.1 ]</div>
</div>
</body></html>
